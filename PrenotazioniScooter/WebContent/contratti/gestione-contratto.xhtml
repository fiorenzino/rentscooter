<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://topnet.it/facelets"
	xmlns:fn="http://topnet.it/functions"
	xmlns:rich="http://richfaces.ajax4jsf.org/rich"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax">

<ui:composition template="/WEB-INF/layout/t_single.xhtml">
	<ui:define name="title">Gestione Contratti</ui:define>
	<ui:define name="content">
		<p style="align: center;">Gestione Contratti</p>
		<h:form id="form">
			<rich:panel id="prenotazioneScooter">

				<a:field id="Cliente" label="Cliente(*):" type="selOneM"
					entityId="#{contrattiHandler.contratto.cliente}" fieldName="id"
					entityList="#{clientiHandler}" fieldNameList="clientiItems"
					required="true" />


				<a:field id="note" label="Note(*):" fieldName="note"
					entity="#{contrattiHandler.contratto}" required="false"
					type="inputTextArea" />

				<a:field id="dataInit" label="Data Inizio(*):" fieldName="dataInit"
					type="calendar" entity="#{contrattiHandler.contratto}"
					required="true" />

				<a:field id="dataEnd" label="Data Riconsegna(*):"
					fieldName="dataEnd" type="calendar"
					entity="#{contrattiHandler.contratto}" required="true" />

				<a:field id="scooter" label="Scooter(*):" type="selOneM"
					entityId="#{contrattiHandler.contratto.scooter}" fieldName="id"
					entityList="#{scootersHandler}" fieldNameList="scootersItems"
					required="true" />

				<a4j:commandButton id="calculateSum"
					action="#{contrattiHandler.calcolaSomma}" value="calcola prezzo"
					reRender="sommaPanel" immediate="false" />

			</rich:panel>

			<rich:panel id="sommaPanel">

				<a:field id="importoIniziale" label="Importo Iniziale(*):"
					fieldName="importoIniziale"
					dataInit"" entity="#{contrattiHandler.contratto}" required="false" />

				<a:field id="sconto" label="Sconto(*):" fieldName="sconto"
					dataInit"" entity="#{contrattiHandler.contratto}" required="false" />

				<a:field id="extra" label="Extra(*):" fieldName="extra"
					dataInit"" entity="#{contrattiHandler.contratto}" required="false" />

				<a:field id="totale" label="Totale(*):" fieldName="totale"
					dataInit"" entity="#{contrattiHandler.contratto}" required="false" />

			</rich:panel>

			<rich:spacer height="30" />
			<div><h:commandButton id="submitAdd"
				action="#{contrattiHandler.addContratto2}"
				value="Crea Nuovo Contratto"
				rendered="#{not contrattiHandler.editMode}" /> <h:commandButton
				id="submitUpdate" action="#{contrattiHandler.modContratto2}"
				value="Salva Modifiche" rendered="#{contrattiHandler.editMode}" />
			<h:commandButton id="delUpdate"
				action="#{contrattiHandler.delContratto}" value="Elimina"
				rendered="#{contrattiHandler.editMode}" /></div>

		</h:form>
	</ui:define>
</ui:composition>
</html>
